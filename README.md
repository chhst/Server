# Roblox Asym Horror (Forsaken-like) — серверный каркас

Этот репозиторий содержит **структуру проекта** для асимметричного режима (1 убийца vs несколько выживших) на **Lua/Luau для Roblox Studio**:

- цикл раундов (лобби → интермиссия → раунд → пост-раунд),
- выбор ролей,
- морф в выбранного персонажа после старта раунда,
- базовая система способностей (с кулдаунами) для выживших и убийцы,
- пример клиентского ввода под способности.

## Структура

```text
src/
  ServerScriptService/
    Main.server.lua
    Modules/
      RoundManager.lua
      TeamService.lua
      MorphService.lua
      AbilityService.lua
  ReplicatedStorage/
    Config/
      Characters/
        CharacterCatalog.lua
      Abilities/
        AbilityCatalog.lua
    Remotes/ (создается/используется рантаймом)
  StarterPlayerScripts/
    RoundClient.client.lua
```

## Что уже реализовано

### 1) Раунд-система

`RoundManager`:
- держит состояния (`INTERMISSION`, `ROUND`, `POST_ROUND`, `WAITING_FOR_PLAYERS`),
- проверяет минимум игроков,
- выбирает убийцу,
- назначает роли,
- применяет морфы,
- следит за условиями победы:
  - убийца мертв → победа выживших,
  - все выжившие мертвы → победа убийцы,
  - таймер истек → `TimeUp`.

### 2) Морфы персонажей

`MorphService`:
- респавнит игрока перед применением образа,
- чистит аксессуары/одежду,
- накладывает базовую внешность через `BodyColors`,
- применяет статы (`WalkSpeed`, `MaxHealth`),
- помечает текущую роль в `StringValue` (`Role`).

### 3) Система способностей

`AbilityService`:
- регистрирует набор способностей по выбранному персонажу,
- принимает `CastAbility` с клиента,
- валидирует наличие способности и кулдаун,
- вызывает `Execute` из каталога,
- отправляет клиенту событие `ABILITY_CAST`.

В `AbilityCatalog` добавлены примеры:
- `SprintBurst` (выживший, баф скорости),
- `MedicPulse` (выживший, отхил),
- `RageSlash` (убийца, AOE-удар).

## Каталог персонажей

`CharacterCatalog` содержит шаблоны:
- выжившие: `Scout`, `Medic`,
- убийца: `Slasher`.

У каждого:
- `Stats`,
- `Appearance`,
- `Abilities`.

## Как подключить в Roblox Studio

1. Скопируй структуру из `src` в соответствующие сервисы Roblox:
   - `ServerScriptService`,
   - `ReplicatedStorage`,
   - `StarterPlayerScripts`.
2. Проверь, что `Main.server.lua` находится в `ServerScriptService`.
3. Запусти Play Test.
4. На клиенте (пример) прожимай:
   - `Q` → `SprintBurst`,
   - `E` → `MedicPulse`,
   - `R` → `RageSlash`.

## Что обычно расширяют дальше

- нормальный UI выбора персонажей/перков до раунда,
- серверную валидацию дистанции/видимости/коллизии для всех активных скиллов,
- отдельную систему состояния игрока (ранен, схвачен, сбит и т.п.),
- спавнпоинты, генераторы/объективы, экстракцию,
- матчмейкинг и MMR,
- систему анти-эксплойта и журналирование боевых событий.

---

Если хочешь, следующим шагом я могу добавить:
- полноценный `CharacterSelect` с сохранением выбора в DataStore,
- серверный hit-validation для убийцы,
- UI-кит под раунд таймер/иконки способностей/кулдауны.
